window.ShearPhoto.MINGGE(function(){var b,c,d,e,f,g,h,i,k,l,m,n,p,q,r,s,t,u,v,w,x,y,a="shearphoto_common";a=a.replace(/(^\s*)|(\s*$)/g,""),""===a||(a+="/"),b=document.getElementById("relat"),c=b.getElementsByTagName("img"),d=new ShearPhoto,d.config({relativeUrl:a,traverse:!0,translate3d:!1,HTML5:!0,HTML5MAX:500,HTML5Quality:.9,HTML5FilesSize:50,HTML5Effects:!0,HTML5ZIP:[900,.9],preview:[150],url:a+"php/shearphoto.php",scopeWidth:500,scopeHeight:500,proportional:[1,100,133],Min:50,Max:500,backgroundColor:"#000",backgroundOpacity:.6,Border:0,BorderStyle:"solid",BorderColor:"#09F",relat:b,scope:document.getElementById("main"),ImgDom:c[0],ImgMain:c[1],black:document.getElementById("black"),form:document.getElementById("smallbox"),ZoomDist:document.getElementById("ZoomDist"),ZoomBar:document.getElementById("ZoomBar"),to:{BottomRight:document.getElementById("BottomRight"),TopRight:document.getElementById("TopRight"),Bottomleft:document.getElementById("Bottomleft"),Topleft:document.getElementById("Topleft"),Topmiddle:document.getElementById("Topmiddle"),leftmiddle:document.getElementById("leftmiddle"),Rightmiddle:document.getElementById("Rightmiddle"),Bottommiddle:document.getElementById("Bottommiddle")},Effects:document.getElementById("shearphoto_Effects")||!1,DynamicBorder:[document.getElementById("borderTop"),document.getElementById("borderLeft"),document.getElementById("borderRight"),document.getElementById("borderBottom")],SelectBox:document.getElementById("SelectBox"),Shearbar:document.getElementById("Shearbar"),UpFun:function(){d.MoveDiv.DivWHFun()}}),d.complete=function(a){var c,e,d,f,g,h,b=this.arg.scope.childNodes[0];for("point"===b.className&&this.arg.scope.removeChild(b),c=document.createElement("div"),c.className="complete",c.style.height=this.arg.scopeHeight+"px",this.arg.scope.insertBefore(c,this.arg.scope.childNodes[0]),d=a.length,f=0;d>f;f++)e=document.createElement("img"),c.appendChild(e),e.src=this.arg.relativeUrl+a[f]["ImgUrl"];this.HTML5.EffectsReturn(),this.HTML5.BOLBID&&this.HTML5.URL.revokeObjectURL(this.HTML5.BOLBID),e=document.createElement("DIV"),e.className="completeTxt",e.innerHTML="<strong><i></i>恭喜你！截图成功</strong> <p>以上是你图片的"+d+'种尺寸</p><a href="javascript:;" id="completeA">完成</a>',c.appendChild(e),g=document.getElementById("completeA"),h=this,h.preview.close_(),g.onclick||(g.onclick=function(){g.onclick=null,h.arg.scope.removeChild(c),h.again(),h.pointhandle(3e3,10,"截图完成！已返回！",2,"#fbeb61","#3a414c")})},e=document.getElementById("photoalbum"),f=document.getElementById("ShearPhotoForm"),f.UpFile.onclick=function(){return!1},g=new ShearPhoto.frameUpImg({url:a+"php/upload.php",FORM:f,UpType:new Array("jpg","jpeg","png","gif"),FilesSize:2,HTML5:d.HTML5,HTML5FilesSize:d.arg.HTML5FilesSize,HTML5ZIP:d.arg.HTML5ZIP,erro:function(a){d.pointhandle(3e3,10,a,0,"#f82373","#fff")},fileClick:function(){d.pointhandle(-1)},preced:function(a){try{e.style.display="none",u.onclick()}catch(b){console.log("在加载图片时，发现相册或拍照的对象检测不到，错误代码："+b)}d.pointhandle(0,10,"正在为你加载图片，请你稍等哦......",2,"#307ff6","#fff",a)}}),g.run(function(a,b){return b||(a=ShearPhoto.JsonString.StringToJson(a)),a===!1?(d.SendUserMsg("错误：请保证后端环境运行正常",5e3,0,"#f4102b","#fff",!0,!0),void 0):a.erro?(d.SendUserMsg("错误："+a.erro,5e3,0,"#f4102b","#fff",!0,!0),void 0):(d.run(a.success,!0),void 0)});try{for(h={".jpg":"image/jpeg",".jpeg":"image/jpeg",".gif":"image/jpeg",".png":"image/png"},i=function(a){return h[/\.[^.]+$/.exec(a)]||"image/jpeg"},document.documentElement,k=document.getElementById("PhotoLoading"),l=e.getElementsByTagName("li"),m=function(){var a=this.getElementsByTagName("img")[0].getAttribute("serveUrl");d.HTML5.ImagesType=i(a),d.run(a),e.style.display="none"},n=0;n<l.length;n++)l[n].onclick=m;k.onclick=function(){e.style.display="block"},document.getElementById("close").onclick=function(){e.style.display="none"}}catch(o){console.log("相册对象检测有误，默认你抱弃这个功能，错误代码："+o)}d.addEvent(document.getElementById("saveShear"),"click",function(){d.SendPHP({shearphoto:"我要传参数到服端",mingge:"我要传第二个参数到服务器"})}),d.addEvent(document.getElementById("LeftRotate"),"click",function(){d.Rotate("left")}),d.addEvent(document.getElementById("RightRotate"),"click",function(){d.Rotate("right")}),d.addEvent(document.getElementById("againIMG"),"click",function(){d.preview.close_(),d.again(),d.HTML5.EffectsReturn(),d.HTML5.BOLBID&&d.HTML5.URL.revokeObjectURL(d.HTML5.BOLBID),d.pointhandle(3e3,10,"已取消！重新选择",2,"#fbeb61","#3a414c")});try{webcam.init_config={width:500,height:500,server_width:450,server_height:450,uploadfield:"UpFile",postargs:{mingge:"shearphoto我爱你",shearphoto:"shearphoto好"}},webcam.set_api_url(a+"php/upload.php"),webcam.set_swf_url(a+"images/webcam.swf"),webcam.set_shutter_sound(!0,a+"images/shutter.mp3"),webcam.set_quality(95),p=document.getElementById("CamFlash"),q=document.getElementById("timing"),r=document.getElementById("CamOk"),s=document.getElementById("CamBox"),t=document.getElementById("camerasImage"),u=document.getElementById("camClose"),v=document.getElementById("setCam"),webcam.noCamcall=function(a){d.SendUserMsg(a,5e3,0,"#f4102b","#fff",!0,!0),u.onclick()},v.onclick=function(){webcam.configure()},u.onclick=function(){webcam.Homing(q),p.innerHTML="",s.style.display="none",t.onclick=w},w=function(){s.style.display="block",p.innerHTML=webcam.get_html(),webcam.newsnap(q,p,r),t.onclick=null},t.onclick=w,webcam.set_hook("onComplete",function(a){return u.onclick(),a=ShearPhoto.JsonString.StringToJson(a),a===!1?(d.SendUserMsg("错误：请保证后端环境运行正常",5e3,0,"#f4102b","#fff",!0,!0),void 0):a.erro?(d.SendUserMsg("错误："+a.erro,5e3,0,"#f4102b","#fff",!0,!0),void 0):(d.HTML5.ImagesType="image/jpeg",d.run(a.success),void 0)})}catch(o){console.log("拍照对象检测不到，默认你抱弃这个功能，错误代码："+o)}x=document.getElementById("shearphoto_loading"),y=document.getElementById("shearphoto_main"),x&&x.parentNode.removeChild(x),y.style.visibility="visible"});